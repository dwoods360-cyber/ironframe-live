generator client {
  provider = "prisma-client-js"
  output   = "../node_modules/@prisma/client-dmz"
}

datasource db {
  provider  = "postgresql"
  url       = env("DMZ_DATABASE_URL")
  directUrl = env("DMZ_DIRECT_URL")
}

// ------------------------------------------------------
// THE HAZMAT ZONE (Agent 14 - Irongate)
// ------------------------------------------------------

model QuarantineRecord {
  id          String   @id @default(cuid())
  tenantId    String   // e.g., "medshield"
  fileName    String
  fileSize    Int      // bytes
  storagePath String   // e.g., tenantId/dmz/timestamp-filename
  uploadedBy  String   // e.g., "J. DOE (CISO)"
  status      String   @default("PENDING") // PENDING, SCANNING, CLEAN, REJECTED
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model AgentLog {
  id          String   @id @default(cuid())
  agentId     String   // e.g., "Agent-14-Irongate"
  targetId    String   // The ID of the QuarantineRecord it is working on
  action      String   // e.g., "MACRO_STRIP", "TEXT_FLATTEN"
  status      String   // SUCCESS, FAILED
  details     String?
  createdAt   DateTime @default(now())
}