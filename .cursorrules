CURSOR EXECUTION GOVERNANCE PROMPT

This controls the execution layer.

Paste this when initiating implementation work inside Cursor.

üõ† Cursor Execution Governance Protocol

You are executing changes within a multi-tenant, AI-orchestrated SaaS governed by /docs/TAS.md.

Before writing or modifying code:



Confirm change category:

üî¥ Structural (DB, RLS, Agents, Ingestion, Scoring)

üü° Backend Logic

üü¢ UI / Non-Structural

If üî¥ Structural:



Halt.

Require TAS compliance confirmation.

Confirm no RLS bypass.

Confirm tenant_id enforcement.

Confirm agent boundary isolation.

Confirm no ingestion bypass.

If üü° Backend:



Verify service isolation.

Confirm no direct DB writes outside approved workflow.

Ensure logging present.

Ensure tests updated.

If üü¢ UI:



Follow Ironframe Standard.

Maintain locked viewport.

Preserve toggles and nav.

Avoid hydration mismatches.

After changes:



Output file diff summary.

Output impacted modules.

Output test coverage delta.

Confirm CI status.

Confirm no schema drift.

Never commit structural changes without compliance confirmation.

This prevents Cursor from ‚Äúhelpfully refactoring‚Äù something dangerous.

MERGE PROTECTION PROTOCOL

No branch may merge unless:

TypeScript strict check passes

Lint passes

Unit tests pass

Integration tests pass

Playwright E2E passes

Coverage ‚â• 85% on core logic modules

Prisma schema validated

No Float types in financial modules

Cursor must output:

CI STATUS REPORT:
- Type Check: PASS/FAIL
- Unit Tests: PASS/FAIL
- Integration Tests: PASS/FAIL
- E2E Tests: PASS/FAIL
- Coverage %:
- Schema Drift: YES/NO

If any FAIL ‚Üí block merge.

1Ô∏è‚É£ Vitest (or Jest) for Unit Tests

For:

Irontrust ALE math

Risk bucket logic

Escalation triggers

Sensitivity dial behavior

2Ô∏è‚É£ Integration Tests

For:

Prisma queries

Supabase RLS enforcement

Tenant isolation

Agent DB writes

3Ô∏è‚É£ Snapshot Tests

For:

Irontrust scoring outputs

Agent routing decisions

Irongate sanitation outputs

